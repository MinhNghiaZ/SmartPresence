@import url('https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css');
@import url('https://fonts.googleapis.com/css2?family=Oswald:wght@200;300;400;500;600;700&display=swap');

/* CSS Variable Theme Tokens */
:root {
  --sp-bg: #f8fafc;
  --sp-surface: #ffffff;
  --sp-surface-alt: #f8fafc;
  --sp-border: #e5e7eb;
  --sp-border-strong: #d1d5db;
  --sp-text: #1f2937;
  --sp-text-muted: #6b7280;
  --sp-primary: #3b82f6;
  --sp-primary-accent: #2563eb;
  --sp-danger: #ef4444;
  --sp-danger-accent: #dc2626;
  --sp-success: #10b981;
  --sp-success-accent: #059669;
  --sp-warning: #f59e0b;
  --sp-radius-sm: 4px;
  --sp-radius: 8px;
  --sp-radius-lg: 12px;
  --sp-shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
  --sp-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
  --sp-shadow-lg: 0 10px 25px -5px rgba(0,0,0,0.15);
  --sp-focus: 0 0 0 3px rgba(59,130,246,0.4);
  --sp-font-stack: 'Oswald', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
}

@keyframes slideIn { from { opacity:0; transform:translateY(20px);} to { opacity:1; transform:translateY(0);} }
@keyframes pulse { 0%,100% { transform:scale(1);} 50% { transform:scale(1.05);} }
@keyframes spin { to { transform:rotate(360deg);} }
.animate-slide-in { animation:slideIn .5s ease-out; }
.animate-pulse-custom { animation:pulse 2s infinite; }
.animate-spin { animation:spin 1s linear infinite; }

.admin-screen { min-height:100vh; background:var(--sp-bg); font-family:var(--sp-font-stack); color:var(--sp-text); }
.access-denied { min-height:100vh; display:flex; align-items:center; justify-content:center; padding:2rem; background:linear-gradient(135deg,#f1f5f9 0%,#e2e8f0 100%); }
.access-denied-content { background:#fff; border-radius:.75rem; padding:3rem; text-align:center; box-shadow:0 10px 25px rgba(0,0,0,.1); max-width:500px; width:100%; animation:slideIn .5s ease-out; }
.access-denied-icon { font-size:5rem; margin-bottom:1.5rem; opacity:.8; }
.access-denied h1 { margin:0 0 1rem; color:#dc2626; font-size:2rem; font-weight:700; }
.access-denied p { margin:0 0 1rem; color:#64748b; font-size:1.1rem; line-height:1.6; }
.access-denied .action-btn { margin-top:2rem; background:linear-gradient(to right,#3b82f6,#2563eb); color:#fff; padding:.75rem 1.5rem; border-radius:.5rem; border:none; font-weight:500; cursor:pointer; transition:all .3s ease; }
.access-denied .action-btn:hover { background:linear-gradient(to right,#2563eb,#1d4ed8); transform:translateY(-1px); box-shadow:0 4px 12px rgba(59,130,246,.4); }

.admin-nav { background:linear-gradient(to right,#374151,#1f2937); box-shadow:0 4px 6px -1px rgba(0,0,0,.1); border-bottom:2px solid #374151; }
.admin-nav-content { max-width:1280px; margin:0 auto; padding:0 1rem; }
.admin-nav-inner { display:flex; align-items:center; justify-content:space-between; padding:.75rem 0; }
.admin-nav-title h1 { font-size:1.25rem; font-weight:700; color:#fff; line-height:1.25; margin:0; }
.admin-nav-title p { font-size:.875rem; color:#d1d5db; line-height:1.25; margin:0; }

.admin-container { max-width:1280px; margin:0 auto; padding:1.5rem 1rem; }
.admin-banner { background:linear-gradient(to right,#dbeafe,#bfdbfe); padding:1.5rem; border-radius:.5rem; box-shadow:var(--sp-shadow); margin-bottom:1.5rem; transition:all .5s ease; animation:slideIn .5s ease-out; position:relative; overflow:hidden; }
.admin-banner::after { content:""; position:absolute; inset:0; background:radial-gradient(circle at 80% 20%, rgba(255,255,255,0.4), transparent 60%); pointer-events:none; }
.admin-banner:hover { box-shadow:0 10px 15px -3px rgba(0,0,0,.1); }
.admin-banner h2 { font-size:2rem; font-weight:700; margin:0 0 .75rem; color:#1f2937; }
.admin-banner p { color:#374151; font-size:1.125rem; margin:0 0 .5rem; }
.admin-banner .subtitle { color:#4b5563; margin-bottom:1rem; }
.admin-actions { display:flex; flex-wrap:wrap; gap:.5rem; margin-top:1rem; }
.admin-action-btn { background:#ef4444; color:#fff; padding:.5rem 1rem; border-radius:.5rem; font-size:.875rem; border:none; cursor:pointer; transition:all .3s ease; display:flex; align-items:center; gap:.25rem; }
.admin-action-btn:hover { background:#dc2626; transform:translateY(-1px); }
.admin-action-btn.success { background:#10b981; }
.admin-action-btn.success:hover { background:#059669; }
.admin-action-btn.primary { background:#3b82f6; }
.admin-action-btn.primary:hover { background:#2563eb; }

.admin-content-grid { display:grid; grid-template-columns:1fr; gap:1.5rem; }
@media (min-width:1024px){ .admin-content-grid { grid-template-columns:2fr 1fr; } }
.admin-main-content { display:grid; gap:1.5rem; }

.admin-stats { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:1rem; margin-bottom:1.5rem; }
.stat-card { background:var(--sp-surface); padding:1.5rem; border-radius:.5rem; box-shadow:var(--sp-shadow); transition:all .3s ease; animation:slideIn .5s ease-out; position:relative; }
.stat-card::before { content:""; position:absolute; inset:0; border-radius:inherit; background:linear-gradient(135deg,rgba(255,255,255,0.08),rgba(255,255,255,0)); opacity:0; transition:opacity .3s ease; }
.stat-card:hover::before { opacity:1; }
.stat-card:hover { box-shadow:0 10px 15px -3px rgba(0,0,0,.1); transform:translateY(-2px); }
.stat-card h3 { font-size:1.25rem; font-weight:600; color:#1f2937; margin:0 0 .75rem; display:flex; align-items:center; gap:.5rem; }
.stat-card .stat-number { font-size:2.5rem; font-weight:700; color:#3b82f6; margin:0 0 .5rem; }
.stat-card .stat-label { color:#6b7280; font-size:.875rem; }

.admin-section, .sidebar-section { background:var(--sp-surface); padding:1.5rem; border-radius:.5rem; box-shadow:var(--sp-shadow); transition:all .3s ease; animation:slideIn .5s ease-out; }
.admin-section:hover, .sidebar-section:hover { box-shadow:0 10px 15px -3px rgba(0,0,0,.1); }
.admin-section h3, .sidebar-section h3 { font-size:1.25rem; font-weight:600; color:#1f2937; margin:0 0 1rem; display:flex; align-items:center; gap:.5rem; }
.admin-sidebar { display:grid; gap:1.5rem; height:fit-content; }

/* Subject filter */
.subject-filter select { min-width:220px; font-size:.875rem; }
.subject-filter label { color:#374151; }
.subject-filter select:focus { box-shadow:0 0 0 3px rgba(59,130,246,0.25); border-color:#2563eb; }

.back-button { background:linear-gradient(to right,#6b7280,#4b5563); color:#fff; padding:.75rem 1.5rem; border-radius:.5rem; border:none; font-weight:500; cursor:pointer; transition:all .3s ease; display:flex; align-items:center; gap:.5rem; margin-bottom:1.5rem; position:relative; isolation:isolate; }
.back-button:focus-visible { box-shadow:var(--sp-focus); }
.back-button:hover { background:linear-gradient(to right,#4b5563,#374151); transform:translateY(-1px); box-shadow:0 4px 12px rgba(107,114,128,.4); }

.data-table { width:100%; background:var(--sp-surface); border-radius:.5rem; overflow:hidden; box-shadow:var(--sp-shadow-sm); border:1px solid var(--sp-border); }
.data-table table { width:100%; border-collapse:collapse; }
.data-table th { background:var(--sp-surface-alt); padding:1rem; text-align:left; font-weight:600; color:var(--sp-text); border-bottom:1px solid var(--sp-border); font-size:.75rem; letter-spacing:.5px; text-transform:uppercase; }
.data-table td { padding:.75rem 1rem; border-bottom:1px solid var(--sp-border); color:var(--sp-text-muted); font-size:.8125rem; }
.data-table tbody tr { transition:background .2s ease; }
.data-table tbody tr:focus-within { outline:2px solid var(--sp-primary); outline-offset:-2px; }
.data-table tr:hover { background:#f8fafc; }
.data-table tr.editing-row { background:#eef6ff; }

/* Inline edit controls */
.row-actions { display:flex; gap:.35rem; }
.row-action-btn { background:#fff; border:1px solid var(--sp-border); width:30px; height:30px; display:flex; align-items:center; justify-content:center; border-radius:6px; cursor:pointer; font-size:.85rem; transition:all .2s ease; }
.row-action-btn.edit { color:#2563eb; }
.row-action-btn.save { color:#059669; }
.row-action-btn.cancel { color:#dc2626; }
.row-action-btn:hover { background:#f1f5f9; border-color:var(--sp-primary); box-shadow:0 1px 3px rgba(0,0,0,.08); }
.row-action-btn.save:hover { border-color:#059669; }
.row-action-btn.cancel:hover { border-color:#dc2626; }
.row-action-btn:focus-visible { outline:none; box-shadow:0 0 0 3px rgba(59,130,246,.45); }
.edit-status-select { padding:.35rem .5rem; font-size:.7rem; border:1px solid var(--sp-border); border-radius:6px; background:#fff; font-weight:600; letter-spacing:.5px; }
.edit-status-select:focus { outline:none; box-shadow:0 0 0 3px rgba(59,130,246,.35); border-color:var(--sp-primary); }

.status-badge { display:inline-block; padding:.25rem .6rem; border-radius:9999px; font-size:.65rem; font-weight:600; letter-spacing:.5px; text-transform:uppercase; line-height:1; }
.status-badge.present { background:#dcfce7; color:#166534; }
.status-badge.late { background:#fef3c7; color:#92400e; }
.status-badge.absent { background:#fee2e2; color:#991b1b; }
.status-badge.success { background:#dcfce7; color:#166534; }
.status-badge.failed { background:#fee2e2; color:#991b1b; }

.empty-state { text-align:center; padding:3rem 1rem; color:#6b7280; }
.empty-state-icon { font-size:3rem; margin-bottom:1rem; opacity:.6; }
.empty-state h4 { font-size:1.125rem; font-weight:500; color:#374151; margin:0 0 .5rem; }
.empty-state p { color:#6b7280; margin:0 0 1rem; }
.empty-state .tips { font-size:.75rem; color:#9ca3af; line-height:1.5; }

/* Absent alert panel */
.absent-alert { border-left:4px solid #dc2626; position:relative; }
.absent-alert h3 { display:flex; align-items:center; gap:.4rem; }
.absent-list { list-style:none; margin:.5rem 0 0; padding:0; display:flex; flex-direction:column; gap:.4rem; }
.absent-item { display:flex; justify-content:space-between; align-items:center; background:#fff; border:1px solid var(--sp-border); padding:.5rem .65rem; border-radius:.5rem; font-size:.75rem; line-height:1.2; }
.absent-item .name { font-weight:600; color:#1f2937; }
.absent-item .days { font-weight:600; color:#dc2626; font-size:.7rem; background:#fee2e2; padding:.2rem .45rem; border-radius:999px; }
.absent-item:hover { background:#fff5f5; }

/* Overview grouped stats */
.overview-groups { display:grid; gap:1rem; }
.overview .group-block { background:#fff; border:1px solid var(--sp-border); border-radius:.75rem; padding:1rem 1rem 1.1rem; box-shadow:0 2px 6px -2px rgba(0,0,0,.08); position:relative; overflow:hidden; }
.overview .group-block::after { content:""; position:absolute; inset:0; background:radial-gradient(circle at 85% 20%, rgba(37,99,235,0.08), transparent 65%); pointer-events:none; }
.overview .group-title { font-size:.8rem; font-weight:700; text-transform:uppercase; letter-spacing:1px; color:#1d4ed8; margin:0 0 .6rem; }
.overview .kv { display:flex; justify-content:space-between; align-items:center; font-size:.8rem; padding:.25rem 0; line-height:1.2; }
.overview .kv span:first-child { color:#64748b; font-weight:600; }
.overview .kv span:last-child { font-weight:700; font-size:.95rem; color:#0f172a; background:linear-gradient(135deg,#3b82f6 0%,#2563eb 60%,#1d4ed8 100%); -webkit-background-clip:text; background-clip:text; color:transparent; position:relative; }
.overview .kv span:last-child::before { content:""; position:absolute; inset:0; background:linear-gradient(90deg,rgba(59,130,246,0.12),rgba(37,99,235,0.05)); border-radius:6px; transform:translateY(2px); z-index:-1; }
.overview .kv span:last-child::after { content:""; position:absolute; inset:0; border-radius:6px; box-shadow:0 0 0 1px rgba(59,130,246,0.15); z-index:-2; }
.overview .group-block:hover { box-shadow:0 6px 16px -4px rgba(0,0,0,.15); }
.overview .group-block:hover .group-title { color:#2563eb; }
.overview .group-block:focus-within { box-shadow:0 0 0 3px rgba(59,130,246,.25); }
@media (min-width:1200px){ .overview-groups { grid-template-columns:1fr; } }

.custom-scrollbar::-webkit-scrollbar { width:6px; }
.custom-scrollbar::-webkit-scrollbar-track { background:#f1f5f9; border-radius:3px; }
.custom-scrollbar::-webkit-scrollbar-thumb { background:#cbd5e1; border-radius:3px; }
.custom-scrollbar::-webkit-scrollbar-thumb:hover { background:#94a3b8; }

@media (max-width:768px){
  .admin-nav-inner { padding:.5rem 0; }
  .admin-nav-title h1 { font-size:1.125rem; }
  .admin-nav-title p { font-size:.75rem; }
  .admin-container { padding:1rem; }
  .admin-banner { padding:1rem; }
  .admin-banner h2 { font-size:1.5rem; }
  /* 3x2 grid stats layout (instead of horizontal scroll) */
  .admin-stats { display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); grid-auto-rows:1fr; gap:.75rem; }
  .admin-stats .stat-card { min-width:auto; }
  .data-table th, .data-table td { padding:.5rem; }
  /* Mobile adjustments */
  .admin-content-grid { grid-template-columns:1fr; }
  .admin-sidebar { order:2; }
  .admin-main-content { order:1; }
  /* Remove old horizontal scroll, ensure consistent stat-card sizing */
  .stat-card { padding:1.1rem 1rem; }
  .subject-filter-card { position:static; }
  .data-table { font-size:.75rem; }
  .data-table th { font-size:.6rem; }
  .col-confidence, .col-checkin { display:none; }
  .sidebar-eiu-logo .eiu-logo-img { width:160px; }
}

@media (max-width:640px){
  .stat-card .stat-number { font-size:2rem; }
  .subject-filter-card { padding:.7rem .75rem; }
  .day-nav { font-size:.6rem; }
  .day-nav-btn { width:24px; height:24px; font-size:.7rem; }
  .admin-stats { gap:.6rem; }
  .stat-card { min-width:0; }
  .eiu-logo-caption { font-size:.6rem; }
}

@media (max-width:480px){
  .back-button { padding:.55rem 1rem; font-size:.75rem; }
  .stat-card { padding:1rem; }
  .stat-card h3 { font-size:1rem; }
  .stat-card .stat-number { font-size:1.8rem; }
  .admin-section, .sidebar-section { padding:1rem 1rem 1rem; }
  .subject-chips.large .subject-chip { font-size:.7rem; padding:.55rem .8rem; }
  .day-nav { padding:.2rem .5rem; }
  .data-table th, .data-table td { padding:.4rem .45rem; }
  .sidebar-eiu-logo .eiu-logo-img { width:140px; }
}

/* Subject filter prominent card */
.subject-filter-card { background:linear-gradient(135deg,#ffffff 0%,#f5f8fc 60%,#e6f0ff 130%); border:1px solid var(--sp-border); box-shadow:0 2px 4px rgba(0,0,0,.04); border-radius:.75rem; padding:.9rem 1.1rem; margin-bottom:1rem; position:relative; overflow:hidden; }
.subject-filter-card::before { content:""; position:absolute; inset:0; background:radial-gradient(circle at 95% 30%, rgba(59,130,246,.18), transparent 65%); pointer-events:none; }
.subject-filter-header { display:flex; align-items:center; gap:.85rem; flex-wrap:nowrap; margin:0; }
.subject-filter-header.only-chips { margin:0 0 .35rem; }
.subject-filter-header h3 { margin:0; font-size:1.125rem; font-weight:600; display:flex; align-items:center; gap:.5rem; }
.subject-filter-select select { padding:.5rem .75rem; border:1px solid var(--sp-border-strong); border-radius:.5rem; background:#fff; font-size:.875rem; cursor:pointer; transition:all .2s ease; }
.subject-filter-select select:hover { border-color:var(--sp-primary); }
.subject-filter-select select:focus { outline:none; box-shadow:var(--sp-focus); border-color:var(--sp-primary); }
.subject-chips { display:flex; flex-wrap:nowrap; gap:.6rem; margin:0; overflow-x:auto; scrollbar-width:thin; padding:.15rem .15rem .15rem 0; }
.subject-chips::-webkit-scrollbar { height:6px; }
.subject-chips::-webkit-scrollbar-track { background:transparent; }
.subject-chips::-webkit-scrollbar-thumb { background:#cbd5e1; border-radius:3px; }
.subject-chips.large { gap:.65rem; }
.subject-chip { background:#fff; border:1px solid var(--sp-border); color:#374151; font-size:.72rem; text-transform:uppercase; letter-spacing:.75px; padding:.55rem .95rem; border-radius:14px; font-weight:600; cursor:pointer; transition:all .2s ease; position:relative; line-height:1; white-space:nowrap; }
.subject-chips.large .subject-chip { font-size:.82rem; padding:.7rem 1.05rem; }
.subject-chip:hover { border-color:var(--sp-primary); color:#1f2937; box-shadow:0 1px 3px rgba(0,0,0,.08); }
.subject-chip.active { background:linear-gradient(to right,#2563eb,#1d4ed8); color:#fff; border-color:#1d4ed8; box-shadow:0 4px 10px -2px rgba(29,78,216,.45); }
.subject-chip.active:focus-visible { box-shadow:0 0 0 3px rgba(255,255,255,0.5),0 0 0 6px rgba(37,99,235,.55); }
.subject-chip:focus-visible { outline:none; box-shadow:0 0 0 3px rgba(59,130,246,.45); }
.subject-filter-card:focus-within { box-shadow:0 0 0 3px rgba(59,130,246,.25),0 2px 6px rgba(0,0,0,.05); }
@media (max-width:640px){
  .subject-filter-card { padding:.75rem .85rem; border-radius:.65rem; }
  .subject-filter-header h3 { font-size:.95rem; }
  .subject-chip { font-size:.7rem; padding:.5rem .8rem; }
}
.subject-chip:hover { border-color:var(--sp-primary); color:#1f2937; box-shadow:0 2px 4px rgba(0,0,0,.06); transform:translateY(-1px); }
.subject-chip.active { background:linear-gradient(to right,#3b82f6,#2563eb); color:#fff; border-color:#2563eb; box-shadow:0 4px 10px -2px rgba(37,99,235,.4); }
.subject-chip.active::after { content:""; position:absolute; inset:0; border-radius:inherit; box-shadow:0 0 0 2px rgba(255,255,255,0.4) inset; pointer-events:none; }
.subject-mini-stats { display:grid; grid-template-columns:repeat(auto-fit,minmax(90px,1fr)); gap:.75rem; }
.mini-stat { background:#fff; border:1px solid var(--sp-border); border-radius:.5rem; padding:.5rem .75rem; display:flex; flex-direction:column; align-items:flex-start; gap:.15rem; min-height:60px; position:relative; overflow:hidden; }
.mini-stat .label { font-size:.625rem; font-weight:600; letter-spacing:.5px; text-transform:uppercase; color:var(--sp-text-muted); }
.mini-stat .value { font-size:1rem; font-weight:700; color:#1f2937; }
.mini-stat.present .value { color:#059669; }
.mini-stat.late .value { color:#d97706; }
.mini-stat.absent .value { color:#dc2626; }
.mini-stat.rate .value { color:#2563eb; }
@media (max-width:640px){
  .subject-mini-stats { grid-template-columns:repeat(3,1fr); }
}
@media (min-width:1200px){
  .subject-filter-card { position:sticky; top:0; z-index:10; }
}

.sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

/* Day navigation */
.day-nav { display:inline-flex; align-items:center; gap:.35rem; background:rgba(255,255,255,0.7); padding:.25rem .6rem; border:1px solid var(--sp-border); border-radius:999px; backdrop-filter:blur(4px); font-size:.7rem; }
.day-nav-btn { width:28px; height:28px; display:flex; align-items:center; justify-content:center; font-weight:600; border:1px solid var(--sp-border); background:#fff; color:#1f2937; border-radius:50%; cursor:pointer; transition:all .2s ease; font-size:.8rem; }
.day-nav-btn:hover:not(:disabled) { border-color:var(--sp-primary); color:var(--sp-primary); box-shadow:0 2px 4px rgba(0,0,0,.08); }
.day-nav-btn:disabled { opacity:.4; cursor:not-allowed; }
.day-nav-btn:focus-visible { outline:none; box-shadow:0 0 0 3px rgba(59,130,246,.45); }
.day-indicator { padding:0 .25rem; font-weight:600; letter-spacing:.5px; color:#2563eb; }


/* High contrast improvements */
@media (forced-colors: active) {
  .status-badge { border:1px solid CanvasText; }
  .back-button, .admin-action-btn, .control-button { forced-color-adjust:auto; }
}

/* Utility focus ring */
*[tabindex]:focus-visible, button:focus-visible, select:focus-visible { box-shadow:var(--sp-focus); }


button:focus, select:focus, input:focus { outline:2px solid #3b82f6; outline-offset:2px; }
@media (prefers-reduced-motion:reduce){ *,*::before,*::after { animation-duration:0.01ms!important; animation-iteration-count:1!important; transition-duration:0.01ms!important; } }

/* Sidebar EIU logo scroll to top */
.sidebar-eiu-logo { display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.5rem; cursor:pointer; background:linear-gradient(145deg,#ffffff 0%,#f1f5fb 100%); border:1px solid var(--sp-border); box-shadow:0 2px 6px -2px rgba(0,0,0,.08); transition:all .35s ease; }
.sidebar-eiu-logo .eiu-logo-img { width:200px; max-width:100%; height:auto; filter:drop-shadow(0 4px 8px rgba(0,0,0,.15)); transition:transform .6s cubic-bezier(.19,1,.22,1); }
.sidebar-eiu-logo .eiu-logo-caption { font-size:.7rem; font-weight:600; letter-spacing:.75px; text-transform:uppercase; background:linear-gradient(90deg,#2563eb,#1d4ed8); -webkit-background-clip:text; background-clip:text; color:transparent; }
.sidebar-eiu-logo:hover { transform:translateY(-3px); box-shadow:0 8px 20px -6px rgba(0,0,0,.15); }
.sidebar-eiu-logo:hover .eiu-logo-img { transform:scale(1.08) rotate(-2deg); }
.sidebar-eiu-logo:active { transform:translateY(-1px) scale(.97); }
.sidebar-eiu-logo:focus-visible { outline:none; box-shadow:0 0 0 3px rgba(59,130,246,.35); }
.sidebar-eiu-logo:focus-visible .eiu-logo-img { transform:scale(1.05); }
